const html=document.querySelector("html"),header=document.querySelector(".header"),burger=document.querySelector(".burger"),menu=document.querySelector(".header__menu"),menuList=menu.querySelector(".menu"),menuItemWithSubmenu=document.querySelectorAll(".has-children"),desktopBreakpoint=1e3,language=document.querySelector(".language");let isMobile=null;function addButtonComeback(){document.querySelectorAll(".menu__submenu").forEach(e=>{e.insertAdjacentHTML("afterbegin",'<button type="button" class="menu__comeback delete-btn-style">Назад</button>')}),menu.querySelectorAll(".menu__comeback").forEach(e=>{e.addEventListener("click",()=>{menuList.classList.remove("show-submenu"),e.closest(".has-children").classList.remove("open")})})}function setSubmenuPosition(){document.querySelectorAll(".menu__submenu").forEach(e=>{const t=menuList.offsetTop,n=e.parentElement.offsetTop-t;e.style.top=`-${n}px`})}function resetSubmenuPosition(){document.querySelectorAll(".menu__submenu").forEach(e=>{e.style.top=""})}function openSubmenu(e){document.querySelectorAll(e).forEach(e=>{e.addEventListener("click",()=>{if(e.parentElement.classList.toggle("open"),isMobile){const t=e.closest(".menu");t&&t.classList.toggle("show-submenu")}})})}function closeMenu(){menu.classList.remove("open")}function closeSubMenu(){const e=menu.querySelectorAll(".open");for(let t=0;t<e.length;t++)e[t].classList.remove("open")}function fixHeaderHeight(){const e=window.matchMedia("(max-width: 580px)").matches?40:80;header.nextElementSibling.style.marginTop=header.clientHeight+e+"px"}function isApple(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function languageSwitcher(){language.addEventListener("click",e=>{const t=e.target;if(t.hasAttribute("data-language")){const e=language.querySelector(".language__active"),n=t.getAttribute("data-language");e.parentElement.classList.remove("open"),e.textContent=n,html.setAttribute("lang",n)}})}menuItemWithSubmenu.forEach(e=>{e.classList.add("has-arrow"),"arrow"!==e.lastElementChild.className&&e.insertAdjacentHTML("beforeend",'<button class="menu__btn arrow delete-btn-style" type="bytton"></button>')}),burger.addEventListener("click",()=>{html.classList.toggle("scrollOff"),burger.classList.toggle("open"),menu.classList.toggle("open"),closeSubMenu()});const activeRatings=document.querySelector(".active-ratings__slider");function SliderOnMobile(e,t,n){let s,i=!1;return function(){const o=window.matchMedia("(min-width: 0px) and (max-width: 580px)"),a=document.querySelector(e);a&&(o.matches?i||(i=!0,s=new Swiper(a,{slidesPerView:1,spaceBetween:15,autoHeight:!0,navigation:{prevEl:t,nextEl:n}})):(void 0!==s&&s.destroy(),i=!1))}}activeRatings&&new Swiper(activeRatings,{slidesPerView:2,spaceBetween:80,breakpoints:{0:{slidesPerView:1,spaceBetween:0},580:{slidesPerView:2,spaceBetween:20},768:{spaceBetween:30},1e3:{spaceBetween:40},1100:{spaceBetween:50},1200:{spaceBetween:80}},navigation:{prevEl:".active-ratings__prev",nextEl:".active-ratings__next"}});const lastRating=SliderOnMobile(".last-rating__slider",".last-rating__prev",".last-rating__next"),news=SliderOnMobile(".news__slider",".news__prev",".news__next"),seo=document.querySelector(".seo");if(seo){const e="Свернуть",t="Подробнее",n=document.querySelector(".seo__text"),s=Number.parseInt(n.style.getPropertyValue("--height"));if(n.scrollHeight>s){n.parentElement.insertAdjacentHTML("beforeend",'<button type="button" class="seo__btn btn"></button>');const i=document.querySelector(".seo__btn");n.classList.add("less"),i.textContent=t,i.addEventListener("click",()=>{const o=document.querySelector(".seo__text").scrollHeight;n.classList.toggle("less"),n.classList.contains("less")?(i.textContent=t,n.style.maxHeight=s+"px"):(i.textContent=e,n.style.maxHeight=o+"px")})}}const experts=document.querySelector(".experts__slider");function initSelect(){document.querySelectorAll(".select-wrapper").forEach(e=>{const t=e.querySelector(".custom-select__value");e.addEventListener("click",e=>{const n=e.target;if(n.hasAttribute("data-region")){const e=n.getAttribute("data-region"),s=(n.getAttribute("data-sort"),n.closest("[data-category-id]").getAttribute("data-category-id")),i=n.textContent;t.textContent=i,t.parentElement.classList.remove("open"),getRating(s,4,"people",e)}})})}async function getRating(e,t,n,s){let i=`https://new.eliteukrainerating.com/ajax/get_rating/${e}/?per_page=${t}&sort=${n}&region=${s}`;console.log(i)}experts&&new Swiper(experts,{slidesPerView:4,spaceBetween:60,breakpoints:{0:{slidesPerView:1,spaceBetween:0},580:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:3,spaceBetween:30},1e3:{slidesPerView:4,spaceBetween:40},1200:{spaceBetween:60}},navigation:{prevEl:".experts__prev",nextEl:".experts__next"}});const partners=document.querySelector(".partners__slider");partners&&new Swiper(partners,{slidesPerView:6,spaceBetween:40,loop:!0,breakpoints:{0:{slidesPerView:1,spaceBetween:0},400:{slidesPerView:2,spaceBetween:10},580:{slidesPerView:3,spaceBetween:20},768:{slidesPerView:4,spaceBetween:20},1e3:{slidesPerView:5,spaceBetween:30},1200:{slidesPerView:6,spaceBetween:40}},navigation:{prevEl:".partners__prev",nextEl:".partners__next"}}),window.addEventListener("load",()=>{isMobile=window.matchMedia("(max-width: 1000px)").matches,fixHeaderHeight(),addButtonComeback(),openSubmenu(".arrow"),openSubmenu(".search__btn"),isMobile&&setSubmenuPosition(),isApple()&&html.classList.add("ios"),languageSwitcher(),lastRating(),news(),initSelect()}),window.addEventListener("resize",()=>{isMobile=window.matchMedia("(max-width: 1000px)").matches,isMobile?setSubmenuPosition():(closeMenu(),resetSubmenuPosition()),fixHeaderHeight(),lastRating(),news()});