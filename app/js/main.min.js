const html=document.querySelector("html"),header=document.querySelector(".header"),burger=document.querySelector(".burger"),menu=document.querySelector(".header__menu"),menuList=menu.querySelector(".menu"),menuItemWithSubmenu=document.querySelectorAll(".has-children"),desktopBreakpoint=1e3,language=document.querySelector(".language");let isMobile=null;function addButtonComeback(){document.querySelectorAll(".menu__submenu").forEach(e=>{e.insertAdjacentHTML("afterbegin",'<button type="button" class="menu__comeback delete-btn-style">Назад</button>')}),menu.querySelectorAll(".menu__comeback").forEach(e=>{e.addEventListener("click",()=>{menuList.classList.remove("show-submenu"),e.closest(".has-children").classList.remove("open")})})}function setSubmenuPosition(){document.querySelectorAll(".menu__submenu").forEach(e=>{const t=menuList.offsetTop,n=e.parentElement.offsetTop-t;e.style.top=`-${n}px`})}function resetSubmenuPosition(){document.querySelectorAll(".menu__submenu").forEach(e=>{e.style.top=""})}function openSubmenu(e){document.querySelectorAll(e).forEach(e=>{e.addEventListener("click",()=>{if(e.parentElement.classList.toggle("open"),isMobile){const t=e.closest(".menu");t&&t.classList.toggle("show-submenu")}})})}function closeMenu(){menu.classList.remove("open")}function closeSubMenu(){const e=menu.querySelectorAll(".open");for(let t=0;t<e.length;t++)e[t].classList.remove("open")}function fixHeaderHeight(){const e=window.matchMedia("(max-width: 580px)").matches?40:80;header.nextElementSibling.style.marginTop=header.clientHeight+e+"px"}function isApple(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function languageSwitcher(){language.addEventListener("click",e=>{const t=e.target;if(t.hasAttribute("data-language")){const e=language.querySelector(".language__active"),n=t.getAttribute("data-language");e.parentElement.classList.remove("open"),e.textContent=n,html.setAttribute("lang",n)}})}menuItemWithSubmenu.forEach(e=>{e.classList.add("has-arrow"),"arrow"!==e.lastElementChild.className&&e.insertAdjacentHTML("beforeend",'<button class="menu__btn arrow delete-btn-style" type="bytton"></button>')}),burger.addEventListener("click",()=>{html.classList.toggle("scrollOff"),burger.classList.toggle("open"),menu.classList.toggle("open"),closeSubMenu()});const activeRatings=document.querySelector(".active-ratings__slider");function SliderOnMobile(e,t,n){let a,i=!1;return function(){const s=window.matchMedia("(min-width: 0px) and (max-width: 580px)"),r=document.querySelector(e);r&&(s.matches?i||(i=!0,a=new Swiper(r,{slidesPerView:1,spaceBetween:15,autoHeight:!0,navigation:{prevEl:t,nextEl:n}})):(void 0!==a&&a.destroy(),i=!1))}}activeRatings&&new Swiper(activeRatings,{slidesPerView:2,spaceBetween:80,breakpoints:{0:{slidesPerView:1,spaceBetween:0},580:{slidesPerView:2,spaceBetween:20},768:{spaceBetween:30},1e3:{spaceBetween:40},1100:{spaceBetween:50},1200:{spaceBetween:80}},navigation:{prevEl:".active-ratings__prev",nextEl:".active-ratings__next"}});const lastRating=SliderOnMobile(".last-rating__slider",".last-rating__prev",".last-rating__next"),news=SliderOnMobile(".news__slider",".news__prev",".news__next"),seo=document.querySelector(".seo");if(seo){const e="Свернуть",t="Подробнее",n=document.querySelector(".seo__text"),a=Number.parseInt(n.style.getPropertyValue("--height"));if(n.scrollHeight>a){n.parentElement.insertAdjacentHTML("beforeend",'<button type="button" class="seo__btn btn"></button>');const i=document.querySelector(".seo__btn");n.classList.add("less"),i.textContent=t,i.addEventListener("click",()=>{const s=document.querySelector(".seo__text").scrollHeight;n.classList.toggle("less"),n.classList.contains("less")?(i.textContent=t,n.style.maxHeight=a+"px"):(i.textContent=e,n.style.maxHeight=s+"px")})}}const experts=document.querySelector(".experts__slider");function initSelect(){const e=document.querySelectorAll(".select-wrapper"),t=document.querySelector("#region-rating");let n=null;e.length&&(t&&(n=t.querySelector(".content__label")),e.forEach(e=>{const a=e.querySelector(".custom-select__value");isApple()?e.querySelectorAll(".default-select").forEach(a=>{a.addEventListener("change",a=>{const i=a.target.querySelector("option:checked"),s=i.getAttribute("data-option");switch(n.textContent=i.textContent,e.id){case"sort":t.setAttribute("data-sort",s);break;case"region":t.setAttribute("data-region",s)}renderRegionRating()})}):e.addEventListener("click",i=>{const s=i.target;if(s.hasAttribute("data-option")){const i=s.getAttribute("data-option"),r=s.textContent;switch(a.textContent=r,n.textContent=r,a.parentElement.classList.remove("open"),e.id){case"sort":t.setAttribute("data-sort",i);break;case"region":t.setAttribute("data-region",i)}renderRegionRating()}})}))}function renderRegionRating(){const e=document.querySelector("#region-rating");if(e){const t=e.getAttribute("data-region"),n=e.getAttribute("data-sort");getRating(e.getAttribute("data-category-id"),4,n,t)}}function getRating(e,t,n,a){fetch(`https://new.eliteukrainerating.com/ajax/get_rating/${e}/?per_page=${t}&sort=${n}&region=${a}`).then(e=>e.text()).then(e=>JSON.parse(e)).then(e=>{const t=document.querySelector(".region-table__list");t.textContent="",e.forEach((e,n)=>{const a=e.url,i=e.name,s=e.image,r=null!==e.nomination.name?e.nomination.name:"",o=null!==e.dolgnost?e.dolgnost:"";t.insertAdjacentHTML("beforeend",`<li>\n                    <div class="region-table__position t2">${n+1}</div>\n                    <div class="region-table__person">\n                        <a href="${a}">\n                            <picture class="region-table__photo">\n                                <img loading="lazy" src="${s}" alt="${i}">\n                            </picture>\n                        </a>\n                        <div class="region-table__description">\n                            <p class="region-table__name t3">\n                                <a href="${a}">${i}</a>\n                            </p>\n                            <p class="region-table__text small">${o}</p>\n                        </div>\n                    </div>\n                    <div class="region-table__label">${r}</div>\n                </li>`)})})}experts&&new Swiper(experts,{slidesPerView:4,spaceBetween:60,breakpoints:{0:{slidesPerView:1,spaceBetween:0},580:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:3,spaceBetween:30},1e3:{slidesPerView:4,spaceBetween:40},1200:{spaceBetween:60}},navigation:{prevEl:".experts__prev",nextEl:".experts__next"}});const partners=document.querySelector(".partners__slider");partners&&new Swiper(partners,{slidesPerView:6,spaceBetween:40,loop:!0,breakpoints:{0:{slidesPerView:1,spaceBetween:0},400:{slidesPerView:2,spaceBetween:10},580:{slidesPerView:3,spaceBetween:20},768:{slidesPerView:4,spaceBetween:20},1e3:{slidesPerView:5,spaceBetween:30},1200:{slidesPerView:6,spaceBetween:40}},navigation:{prevEl:".partners__prev",nextEl:".partners__next"}});const activeYears=document.querySelector(".archive__years");if(activeYears){new Swiper(activeYears,{slidesPerView:3,spaceBetween:5,navigation:{prevEl:".archive__prev",nextEl:".archive__next"}});const e=activeYears.querySelector(".swiper-slide-active");e.classList.add("active");const t=2,n="https://new.eliteukrainerating.com";let a=activeYears.closest(".archive").getAttribute("id"),i=e.getAttribute("data-year"),s=html.getAttribute("lang"),r="ru"!==s?"lang="+s:"",o=n+"/ajax/get_ratings";async function callArchiveRender(){"archive__page"===a?(o=r?`${o}/${i}/?${r}`:`${o}/${i}/`,await renderArchive(o),await initPagination("#archive__page .archive__content",".archive__card",12)):(o=r?`${o}/${i}/?${r}&per_page=${t}`:`${o}/${i}/?per_page=${t}`,renderArchive(o))}callArchiveRender(),activeYears.addEventListener("click",e=>{const t=e.target;t.hasAttribute("data-year")&&(activeYears.querySelectorAll(".archive__years li").forEach(e=>e.classList.remove("active")),t.classList.add("active"),a=t.closest(".archive").getAttribute("id"),i=t.getAttribute("data-year"),s=html.getAttribute("lang"),r="ru"===s?"":"lang="+s,o=n+"/ajax/get_ratings",callArchiveRender())})}function renderArchive(e){return fetch(e).then(e=>e.text()).then(e=>JSON.parse(e)).then(e=>{const t=document.querySelector(".archive__content");t.textContent="",e.forEach(e=>{const n=e.url,a=e.name,i=e.image,s=e.label,r=e.date;t.insertAdjacentHTML("beforeend",`<div class="archive__card">\n                <div class="content">\n                    ${s?`<span class="content__label small">${s}</span>`:""}\n                    <picture class="content__image">\n                        <img loading="lazy" src="${i}" alt="${a}">\n                    </picture>\n                    <div class="content__description">\n                        <div class="content__date">\n                            <span>${r}</span>\n                        </div>\n                        <div class="content__title t2">\n                            <a href="${n}">${a}</a>\n                        </div>\n                    </div>\n                </div>`)})})}window.addEventListener("load",()=>{isMobile=window.matchMedia("(max - width: 1000px)").matches,fixHeaderHeight(),addButtonComeback(),openSubmenu(".arrow"),openSubmenu(".search__btn"),isMobile&&setSubmenuPosition(),isApple()&&html.classList.add("ios"),languageSwitcher(),lastRating(),news(),initSelect(),renderRegionRating()}),window.addEventListener("resize",()=>{isMobile=window.matchMedia("(max - width: 1000px)").matches,isMobile?setSubmenuPosition():(closeMenu(),resetSubmenuPosition()),fixHeaderHeight(),lastRating(),news()});