const html=document.querySelector("html"),header=document.querySelector(".header"),burger=document.querySelector(".burger"),menu=document.querySelector(".header__menu"),menuList=menu.querySelector(".menu"),menuItemWithSubmenu=document.querySelectorAll(".has-children"),desktopBreakpoint=1e3,language=document.querySelector(".language");let isMobile=null,currentLanguage=null;const domain="https://new.eliteukrainerating.com";function addButtonComeback(){document.querySelectorAll(".menu__submenu").forEach(e=>{e.insertAdjacentHTML("afterbegin",'<button type="button" class="menu__comeback delete-btn-style">Назад</button>')}),menu.querySelectorAll(".menu__comeback").forEach(e=>{e.addEventListener("click",()=>{menuList.classList.remove("show-submenu"),e.closest(".has-children").classList.remove("open")})})}function setSubmenuPosition(){document.querySelectorAll(".menu__submenu").forEach(e=>{const t=menuList.offsetTop,n=e.parentElement.offsetTop-t;e.style.top=`-${n}px`})}function resetSubmenuPosition(){document.querySelectorAll(".menu__submenu").forEach(e=>{e.style.top=""})}function openSubmenu(e){document.querySelectorAll(e).forEach(e=>{e.addEventListener("click",()=>{if(e.parentElement.classList.toggle("open"),isMobile){const t=e.closest(".menu");t&&t.classList.toggle("show-submenu")}})})}function closeMenu(){menu.classList.remove("open")}function closeSubMenu(){const e=menu.querySelectorAll(".open");for(let t=0;t<e.length;t++)e[t].classList.remove("open")}function fixHeaderHeight(){const e=window.matchMedia("(max-width: 580px)").matches?40:80;header.nextElementSibling.style.marginTop=header.clientHeight+e+"px"}function isApple(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function languageSwitcher(){language.addEventListener("click",e=>{const t=e.target;if(t.hasAttribute("data-language")){const e=language.querySelector(".language__active"),n=t.getAttribute("data-language");e.parentElement.classList.remove("open"),e.textContent=n,html.setAttribute("lang",n),currentLanguage=n,reRender()}})}menuItemWithSubmenu.forEach(e=>{e.classList.add("has-arrow"),"arrow"!==e.lastElementChild.className&&e.insertAdjacentHTML("beforeend",'<button class="menu__btn arrow delete-btn-style" type="bytton"></button>')}),burger.addEventListener("click",()=>{html.classList.toggle("scrollOff"),burger.classList.toggle("open"),menu.classList.toggle("open"),closeSubMenu()});const activeRatings=document.querySelector(".active-ratings__slider");function SliderOnMobile(e,t,n){let i,a=!1;return function(){const r=window.matchMedia("(min-width: 0px) and (max-width: 580px)"),s=document.querySelector(e);s&&(r.matches?a||(a=!0,i=new Swiper(s,{slidesPerView:1,spaceBetween:15,autoHeight:!0,navigation:{prevEl:t,nextEl:n}})):(void 0!==i&&i.destroy(),a=!1))}}activeRatings&&new Swiper(activeRatings,{slidesPerView:2,spaceBetween:80,breakpoints:{0:{slidesPerView:1,spaceBetween:0},580:{slidesPerView:2,spaceBetween:20},768:{spaceBetween:30},1e3:{spaceBetween:40},1100:{spaceBetween:50},1200:{spaceBetween:80}},navigation:{prevEl:".active-ratings__prev",nextEl:".active-ratings__next"}});const lastRating=SliderOnMobile(".last-rating__slider",".last-rating__prev",".last-rating__next"),news=SliderOnMobile(".news__slider",".news__prev",".news__next"),seo=document.querySelector(".seo");if(seo){const e="Свернуть",t="Подробнее",n=document.querySelector(".seo__text"),i=Number.parseInt(n.style.getPropertyValue("--height"));if(n.scrollHeight>i){n.parentElement.insertAdjacentHTML("beforeend",'<button type="button" class="seo__btn btn"></button>');const a=document.querySelector(".seo__btn");n.classList.add("less"),a.textContent=t,a.addEventListener("click",()=>{const r=document.querySelector(".seo__text").scrollHeight;n.classList.toggle("less"),n.classList.contains("less")?(a.textContent=t,n.style.maxHeight=i+"px"):(a.textContent=e,n.style.maxHeight=r+"px")})}}const experts=document.querySelector(".experts__slider");function initSelect(){const e=document.querySelectorAll(".select-wrapper"),t=document.querySelector("#region-rating");let n=null;e.length&&(t&&(n=t.querySelector(".content__label")),e.forEach(e=>{const i=e.querySelector(".custom-select__value");e.addEventListener("click",a=>{const r=a.target;if(r.hasAttribute("data-option")){const a=r.getAttribute("data-option"),s=r.textContent;switch(i.textContent=s,n.textContent=s,i.parentElement.classList.remove("open"),e.id){case"sort":t.setAttribute("data-sort",a);break;case"region":t.setAttribute("data-region",a)}renderRegionRating()}else if(r.hasAttribute("data-href")){const e=r.getAttribute("data-href"),t=r.textContent;i.textContent=t,i.parentElement.classList.remove("open"),window.location.href=e}})}))}function renderRegionRating(){const e=document.querySelector("#region-rating");if(e){const t=e.getAttribute("data-region"),n=e.getAttribute("data-sort");getRating(e.getAttribute("data-category-id"),4,n,t)}}function getRating(e,t,n,i){fetch(`${domain}/ajax/get_rating/${e}/?per_page=${t}&sort=${n}&region=${i}`).then(e=>e.text()).then(e=>JSON.parse(e)).then(e=>{const t=document.querySelector(".region-table__list");t.textContent="",e.forEach((e,n)=>{const i=e.url,a=e.name,r=e.image?e.image:"",s=e.webp?e.webp:"",o=null!==e.nomination.name?e.nomination.name:"",c=null!==e.dolgnost?e.dolgnost:"";t.insertAdjacentHTML("beforeend",`<li>\n                    <div class="region-table__position t2">${n+1}</div>\n                    <div class="region-table__person">\n                        <a href="${i}">\n                            <picture class="region-table__photo">\n                                <source srcset="${s}" type="image/webp">\n                                <img loading="lazy" src="${r}" alt="${a}">\n                            </picture>\n                        </a>\n                        <div class="region-table__description">\n                            <p class="region-table__name t3">\n                                <a href="${i}">${a}</a>\n                            </p>\n                            <p class="region-table__text small">${c}</p>\n                        </div>\n                    </div>\n                    <div class="region-table__label">${o}</div>\n                </li>`)})})}experts&&new Swiper(experts,{slidesPerView:4,spaceBetween:60,breakpoints:{0:{slidesPerView:1,spaceBetween:0},580:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:3,spaceBetween:30},1e3:{slidesPerView:4,spaceBetween:40},1200:{spaceBetween:60}},navigation:{prevEl:".experts__prev",nextEl:".experts__next"}});const partners=document.querySelector(".partners__slider");partners&&new Swiper(partners,{slidesPerView:6,spaceBetween:40,loop:!0,breakpoints:{0:{slidesPerView:1,spaceBetween:0},400:{slidesPerView:2,spaceBetween:10},580:{slidesPerView:3,spaceBetween:20},768:{slidesPerView:4,spaceBetween:20},1e3:{slidesPerView:5,spaceBetween:30},1200:{slidesPerView:6,spaceBetween:40}},navigation:{prevEl:".partners__prev",nextEl:".partners__next"}});const activeYears=document.querySelector(".archive__years");if(activeYears){new Swiper(activeYears,{slidesPerView:3,spaceBetween:5,navigation:{prevEl:".archive__prev",nextEl:".archive__next"}});const e=activeYears.querySelector(".swiper-slide-active");e.classList.add("active");const t=2;let n=activeYears.closest(".archive").getAttribute("id"),i=e.getAttribute("data-year"),a=html.getAttribute("lang"),r="ru"!==a?"lang="+a:"",s=domain+"/ajax/get_ratings";async function callArchiveRender(){"archive__page"===n?(s=r?`${s}/${i}/?${r}`:`${s}/${i}/`,await renderArchive(s),await initPagination("#archive__page .archive__content",".archive__card",12)):(s=r?`${s}/${i}/?${r}&per_page=${t}`:`${s}/${i}/?per_page=${t}`,renderArchive(s))}callArchiveRender(),activeYears.addEventListener("click",e=>{const t=e.target;t.hasAttribute("data-year")&&(activeYears.querySelectorAll(".archive__years li").forEach(e=>e.classList.remove("active")),t.classList.add("active"),n=t.closest(".archive").getAttribute("id"),i=t.getAttribute("data-year"),a=html.getAttribute("lang"),r="ru"===a?"":"lang="+a,s=domain+"/ajax/get_ratings",callArchiveRender())})}function renderArchive(e){return fetch(e).then(e=>e.text()).then(e=>JSON.parse(e)).then(e=>{const t=document.querySelector(".archive__content");t.textContent="",e.forEach(e=>{const n=e.url,i=e.name,a=e.image?e.image:"",r=e.webp?e.webp:"",s=e.label?e.label:"",o=e.date?e.date:"";t.insertAdjacentHTML("beforeend",`<div class="archive__card">\n                <div class="content">\n                    ${s?`<span class="content__label small">${s}</span>`:""}\n                    <picture class="content__image">\n                        <source srcset="${r}" type="image/webp">\n                        <img loading="lazy" src="${a}" alt="${i}">\n                    </picture>\n                    <div class="content__description">\n                        <div class="content__date">\n                            <span>${o}</span>\n                        </div>\n                        <div class="content__title t2">\n                            <a href="${n}">${i}</a>\n                        </div>\n                    </div>\n                </div>`)})})}const likes=document.querySelectorAll(".like__btn");function initTimer(){const e=document.querySelectorAll(".timer");if(e.length){e.forEach(e=>{const t=e.getAttribute("data-date");!function(e=document){const t="ru"===currentLanguage,n=t?"Осталось":"Залишилося",i=t?"дней":"днів",a=t?"часов":"годин",r=t?"минут":"хвилин";e.insertAdjacentHTML("beforeend",`<div class="timer__inner">\n                    <p>${n}</p>\n                    <ul>\n                        <li>\n                            <p class="days"></p>\n                            <p>${i}</p>\n                        </li>\n                        <li>\n                            <p class="hours"></p>\n                            <p>${a}</p>\n                        </li>\n                        <li>\n                            <p class="minutes"></p>\n                            <p>${r}</p>\n                        </li>\n                        <li>\n                            <p class="seconds"></p>\n                            <p>секунд</p>\n                        </li>\n                    </ul>\n                </div>`)}(e),function(e,t=document){const n=new Date(e).getTime();let i=setInterval((function(){const e=(new Date).getTime(),a=n-e;t.querySelector(".days").innerText=Math.floor(a/864e5),t.querySelector(".hours").innerText=Math.floor(a%864e5/36e5),t.querySelector(".minutes").innerText=Math.floor(a%36e5/6e4),t.querySelector(".seconds").innerText=Math.floor(a%6e4/1e3),a<0&&(clearInterval(i),t.querySelector(".timer__inner").remove())}),0)}(t,e)})}}function reRender(){const e=document.querySelectorAll(".timer__inner");e.length&&e.forEach(e=>{e.remove(),initTimer()})}function checkRatingLinks(){const e=document.querySelectorAll(".rating__link");e.length&&e.forEach(e=>{window.location.pathname===e.getAttribute("href")&&e.setAttribute("data-current",!0)})}function initRating(){const e=document.querySelector("#rating");if(e){e.addEventListener("click",e=>{const t=e.target;if(t.classList.contains("content__switcher")){t.closest(".rating__card").classList.toggle("open")}});let t=null;const n=e.getAttribute("data-category-id");if(window.location.pathname){window.location.pathname;t=`${domain}/ajax/get_products/${n}${"/?region=odeska&sort=people"}`}else t=`${domain}/ajax/get_products/${n}/`;ajaxCardLoad(t,".rating__content",n)}}likes.length&&likes.forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".like__count");if("false"===t.getAttribute("data-pressed")){t.setAttribute("data-pressed","true");const n=e.nextElementSibling;n.textContent=++n.textContent}})}),window.addEventListener("load",()=>{isMobile=window.matchMedia("(max - width: 1000px)").matches,currentLanguage=html.getAttribute("lang"),fixHeaderHeight(),addButtonComeback(),openSubmenu(".arrow"),openSubmenu(".search__btn"),isMobile&&setSubmenuPosition(),isApple()&&html.classList.add("ios"),languageSwitcher(),lastRating(),news(),initSelect(),renderRegionRating(),initTimer(),checkRatingLinks(),initRating()}),window.addEventListener("resize",()=>{isMobile=window.matchMedia("(max - width: 1000px)").matches,isMobile?setSubmenuPosition():(closeMenu(),resetSubmenuPosition()),fixHeaderHeight(),lastRating(),news()});